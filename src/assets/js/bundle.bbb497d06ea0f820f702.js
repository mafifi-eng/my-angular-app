(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1013:function(e,t,a){"use strict";var r=a(35),n=a(23),o=a(259),s=a(192),c=a(136),l=a(104),i=a(412),u=a(229),p=a(261)("splice"),m=n.TypeError,d=Math.max,f=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var a,r,n,p,y,b,h=l(this),E=c(h),O=o(e,E),g=arguments.length;if(0===g?a=r=0:1===g?(a=0,r=E-O):(a=g-2,r=f(d(s(t),0),E-O)),E+a-r>9007199254740991)throw m("Maximum allowed length exceeded");for(n=i(h,r),p=0;p<r;p++)(y=O+p)in h&&u(n,p,h[y]);if(n.length=r,a<r){for(p=O;p<E-r;p++)b=p+a,(y=p+r)in h?h[b]=h[y]:delete h[b];for(p=E;p>E-r+a;p--)delete h[p-1]}else if(a>r)for(p=E-r;p>O;p--)b=p+a-1,(y=p+r-1)in h?h[b]=h[y]:delete h[b];for(p=0;p<a;p++)h[p+O]=arguments[p+2];return h.length=E-r+a,n}})},1066:function(e,t,a){"use strict";a.r(t);a(41),a(42),a(9),a(43),a(15),a(32),a(8),a(17),a(24),a(18),a(20),a(19),a(29),a(26),a(332),a(36);var r=a(0),n=a.n(r),o=a(101),s=a(13),c=a(50),l=a(492),i=a(256),u=a(88),p=a(118),m=a(124),d=a(191),f=a(16),y=a(10),b=a(194),h=(a(186),a(1013),a(4)),E=a.n(h),O=a(51),g=(a(27),a(1)),_=a(846),w=a(547),S=a(922),N=function(e){var t=e.coupon,a=e.unseen;return n.a.createElement(w.b,{to:"/rewards-coupons/".concat(encodeURIComponent(t.id)),className:"new-reward","aria-label":function(e,t){return[t?"new reward.":void 0,"".concat(e.headline,"."),"".concat(Object(g.c)("COUPONS_EXPIRES")," ").concat(Object(_.a)(e.expirationDate).format("LL"))].filter(Boolean).join(" ")}(t,!!a)},n.a.createElement(S.a,{coupon:t,isRewardCoupon:!0,isCollapsable:!0,isUnseen:a}))},v=a(206),R=a(246),j=a(379),T=a(321),P=a(422),C=a(63),L=a(21),A=a(111),G=a(89),k=a(177),I=a(94);function x(e){"@babel/helpers - typeof";return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,r=W(e);if(t){var n=W(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(this,a)}}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&U(e,t)}(a,n.a.Component);var t=M(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return z(B(e=t.call.apply(t,[this].concat(n))),"state",{initialUnseenRewards:[],showGameRules:!1,showPunchGameRules:!1,rules:{}}),e}return function(e,t,a){t&&D(e.prototype,t),a&&D(e,a),Object.defineProperty(e,"prototype",{writable:!1})}(a,[{key:"componentDidMount",value:function(){"loaded"===this.props.coupons.type&&(this.markPageAsSeen(),this.markRewardsAsSeen())}},{key:"componentDidUpdate",value:function(e){"loaded"===this.props.coupons.type&&"loaded"!==e.coupons.type&&(this.markPageAsSeen(),this.markRewardsAsSeen())}},{key:"markPageAsSeen",value:function(){var e=this.props.user;if(e)try{localStorage.setItem("".concat(I.e,"_").concat(e.id),"1")}catch(e){}}},{key:"markRewardsAsSeen",value:function(){var e=this.props,t=e.rewards,a=e.user,r=e.unseenRewards;if(t&&a){var n=t.map(function(e){return e.id});try{var o="".concat(I.d,"_").concat(a.id);n.length>0?localStorage.setItem(o,n.join(",")):localStorage.removeItem(o)}catch(e){}this.setState({initialUnseenRewards:r.map(function(e){return e.id})}),this.props.dispatch(Object(k.a)(n,null))}}},{key:"render",value:function(){var e=this;if(!this.props.user)return n.a.createElement(O.a,{to:"/"});if(("loading"===this.props.coupons.type||"not-asked"===this.props.coupons.type)&&("loading"===this.props.punchCardGame.type||"not-asked"===this.props.punchCardGame.type||"loading"===this.props.maxSpendGame.type||"not-asked"===this.props.maxSpendGame.type))return n.a.createElement(p.a,null);if("disabled"===this.props.punchCardGame.type||!this.props.hasActiveGame)return n.a.createElement(O.a,{to:"/"});var t=this.props.rewards;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"game-page-container"},n.a.createElement(u.b,{gutters:!0,className:"game-page"},n.a.createElement(u.a,{size:"full",className:"game-container"},n.a.createElement(i.a,{primaryTitle:Object(g.c)("REWARDS_HEADER_TITLE"),subtitle:Object(g.c)("REWARDS_HEADER_SUBTITLE"),component:"h3",listTitle:!0})),this.renderGameCards(),n.a.createElement(u.a,{size:"full",className:E()("rewards__container","rewards-container","rewards__container--no-margin")},n.a.createElement(f.j,{className:"reward-subheader",tabIndex:0},Object(g.c)("REWARDS_TITLE"),n.a.createElement(C.a,{iconName:"mylidl",className:"icon-mylidl"})),t.length>0&&n.a.createElement(f.h,{className:"rewards-subtitle"},Object(g.c)("COUPONS_NO_CLIP_MESSAGE")),n.a.createElement("div",{className:"rewards-link"},n.a.createElement(y.a,{size:"auto",to:"/mylidl-rewards","data-test":"rewards-sub-link"},Object(g.c)("COUPONS_SUBTITLE_LINK1")),n.a.createElement("span",{className:"rewards-text"},Object(g.c)("COUPONS_SUBTITLE_LINK2"))),t.length>0?t.map(function(t){return n.a.createElement(N,{key:t.id,coupon:t,unseen:e.state.initialUnseenRewards.indexOf(t.id)>-1})}):n.a.createElement("div",{className:"rewards--list-empty"},Object(g.c)("REWARDS_LIST_EMPTY")),n.a.createElement("div",{className:"rewards--view-more"},n.a.createElement(v.a,{type:"button",buttonText:Object(g.c)("REWARDS_LEARN_MORE_BUTTON_CTA"),altText:Object(g.c)("REWARDS_LEARN_MORE_BUTTON_CTA"),url:"/play-mylidl",theme:"primary",color:"blue",dispatch:this.props.dispatch,parentTitle:"rewards",parentType:"Card Section"}))))))}},{key:"renderGameCards",value:function(){var e=this,t=this.props.hasErrorGame,a="loaded"===this.props.punchCardGame.type&&this.props.punchCardGame,r="error"===this.props.punchCardGame.type,o="loaded"===this.props.maxSpendGame.type&&this.props.maxSpendGame,s="error"===this.props.maxSpendGame.type,c="loading"===this.props.punchCardGame.type||"loading"===this.props.maxSpendGame.type,l=r||s||t;return n.a.createElement(u.a,{size:"full"},n.a.createElement("div",{className:"game-cards-header-container"},n.a.createElement(f.i,{className:"game-cards-header"},Object(g.c)("REWARDS_PROGRESS_HEADER_TITLE")),n.a.createElement(T.a,{to:"/play-mylidl"},"learn more")),function(){if(c)return n.a.createElement(p.a,null);if(l)return n.a.createElement(j.a,null);var t=Object.keys(o).map(function(e){return o[e]}),r=Object.keys(a).map(function(e){return a[e]});return t.splice(t.length-1,1),r.splice(r.length-1,1),n.a.createElement(n.a.Fragment,null,n.a.createElement(R.b,null,o&&t.map(function(t){var a=Math.min(t.gameData.milestoneCurrentProgress/t.gameData.milestoneMaxProgress*100);return n.a.createElement(R.a,{type:"continuous",currentAmount:t.gameData.primaryLabel,totalAmount:t.gameData.milestoneMaxProgress+"",remainingAmount:"$".concat(t.gameData.milestoneMaxProgress-t.gameData.milestoneCurrentProgress),percentComplete:a,headerText:t.gameData.secondaryLabel,footerText:"more to win",daysLeft:t.gameData.timeRemainingLabel,gameRules:t.gameRules,onRulesClick:function(t){e.setState({showGameRules:!e.state.showGameRules,rules:t})},milestones:t.gameData.milestones})}),a&&r.map(function(t){return n.a.createElement(R.a,{type:"discrete",currentAmount:t.gameData.currentProgress,totalAmount:t.gameData.maxProgress,headerText:t.gameData.secondaryLabel,footerText:"more ".concat(t.gameData.secondaryLabel," to win"),daysLeft:t.gameData.timeRemainingLabel,gameRules:t.gameRules,onRulesClick:function(t){e.setState({showGameRules:!e.state.showGameRules,rules:t})}})})),!o&&!a&&n.a.createElement("div",{className:"no-games-message"},Object(g.c)("REWARDS_NO_GAMES_MESSAGE")),e.state.showGameRules&&e.state.rules&&n.a.createElement(P.b,{onClose:function(){e.setState({showGameRules:!e.state.showGameRules,rules:null})},label:e.state.rules.label,rules:e.state.rules.rules}))}())}}]),a}();z(H,"displayName","MyRewards");var K=Object(L.a)(function(e){return{user:e.user.user,coupons:Object(o.d)(e),rewards:Object(o.g)(e),unseenRewards:Object(o.h)(e),hasActiveGame:Object(A.c)(e),hasErrorGame:Object(A.d)(e),punchCardGame:Object(A.b)(e),punchCardGameErrors:Object(G.b)(e,"game-punchcard"),maxSpendGame:Object(A.e)(e),maxSpendGameErrors:Object(G.b)(e,"game-maxspend")}})(H),F=a(305),J=function(){return n.a.createElement(F.b,{className:"game-banner",title:"play today by downloading our app!",body:"Look forward to exclusive coupons, priority messages, and more!",smallImage:{title:"Lidl Grocery Store App 3818 SectionBanner",file:{url:"/assets/images/rewards-banner-vertical.png"}},regularImage:{title:"Lidl Grocery Store App 3818 SectionBanner",file:{url:"/assets/images/rewards-banner-horizontal.png"}},callsToAction:[{type:"button",name:"Apps: Learn More",buttonText:"learn more",altText:"Learn more about Lidl's mobile apps.",url:"/play-mylidl"},{type:"badge",image:{title:"Download on the App Store",description:"Download on the App Store",file:{url:"/assets/icons/icon-app-store-black.svg"}},altText:"Download on the App Store",url:"https://itunes.apple.com/us/app/mylidl/id1220932607?ls=1&mt=8"},{type:"badge",image:{title:"Get it on Google Play",description:"Get it on Google Play",file:{url:"/assets/icons/icon-google-play-black.svg"}},altText:"Get it on Google Play",url:"https://play.google.com/store/apps/details?id=com.lidl.android"}]})},X=a(59),Y=a(22);function V(e){"@babel/helpers - typeof";return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a.d(t,"CouponsList",function(){return oe});var $=["coupons","isAuthenticated"];function q(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Q(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,r=ae(e);if(t){var n=ae(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return te(e)}(this,a)}}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Z(e,t)}(a,n.a.Component);var t=ee(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return re(te(e=t.call.apply(t,[this].concat(n))),"state",{showLogin:!1}),e}return function(e,t,a){t&&Q(e.prototype,t),a&&Q(e,a),Object.defineProperty(e,"prototype",{writable:!1})}(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.onPageLoad(null,"coupons")}},{key:"render",value:function(){var e=this;if("loading"===this.props.type||"not-asked"===this.props.type)return n.a.createElement(p.a,null);var t="loaded"===this.props.type&&this.props.coupons.length+this.props.rewards.length||0,a="loaded"===this.props.type&&this.props.user,r=Object(g.c)("SIGN_IN"),o=a?Object(g.c)("NO_COUPONS_LOGGED_IN_PRIMARY"):n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{onClick:function(){return e.setState({showLogin:!0})},className:"here",tabIndex:0},r)," ",Object(g.c)("NO_COUPONS_NOT_LOGGED_IN_PRIMARY"));if("error"===this.props.type||0===t)return n.a.createElement("div",{className:"no-coupons-container"},n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{message:Object(g.c)("HOME_HEADER_VIEW_COUPONS"),subMessage:o,image:""}),this.state.showLogin&&n.a.createElement(b.a,{onClose:function(){return e.setState({showLogin:!1})}})),a?null:n.a.createElement(m.a,{title:Object(g.c)("NO_COUPONS_NOT_LOGGED_IN_TITLE"),subMessage:Object(g.c)("NO_COUPONS_NOT_LOGGED_IN_TITLE_TEXT"),image:"",link:n.a.createElement(y.a,{to:{pathname:"/register",state:{fromCoupons:!0}}},n.a.createElement("span",{className:"here"},"here."))}),n.a.createElement(m.a,{title:Object(g.c)("NO_COUPONS_ALL_TITLE"),subMessage:Object(g.c)("NO_COUPONS_ALL_TEXT"),image:"",link:n.a.createElement(y.a,{to:"/specials?category=all-current"},n.a.createElement("span",{className:"here"},"here."))}));var s=this.props,h=s.coupons,E=s.isAuthenticated,O=q(s,$),_="/rewards-coupons"===this.props.match.url;return n.a.createElement(u.b,{gutters:!0,className:"coupons"},n.a.createElement(u.a,{size:"full"},n.a.createElement(i.a,{primaryTitle:Object(g.c)("COUPONS_HEADER_TITLE"),component:"h3",listTitle:!0}),!E&&n.a.createElement(n.a.Fragment,null,n.a.createElement(f.j,{className:"reward-subheader",tabIndex:0},Object(g.c)("REWARDS_TITLE"),n.a.createElement(C.a,{iconName:"mylidl",className:"icon-mylidl"})),n.a.createElement("div",{className:"rewards-link"},n.a.createElement(y.a,{size:"auto",to:"/mylidl-rewards","data-test":"rewards-sub-link"},Object(g.c)("COUPONS_SUBTITLE_LINK1")),n.a.createElement("span",{className:"rewards-text"},Object(g.c)("COUPONS_SUBTITLE_LINK2"))),h.length>0?n.a.createElement("div",{className:"cta-links"},n.a.createElement(Y.a,{size:"auto",theme:"primary",color:"blue","data-test":"register",onClick:function(){return e.setState({showLogin:!0})}},Object(g.c)("REGISTER_JOIN_SIGN_IN")),n.a.createElement(y.a,{size:"auto",to:"/mylidl",theme:"primary",color:"blue","data-test":"mylidl",onClick:function(){return e.setState({showLogin:!0})}},Object(g.c)("REWARDS_LEARN_MORE_BUTTON_CTA"))):null,this.state.showLogin&&n.a.createElement(b.a,{onClose:function(){return e.setState({showLogin:!1})}}),n.a.createElement("span",{className:"coupons-list-divider"}))),E&&n.a.createElement(K,O),E&&n.a.createElement("div",{className:"coupons-list-divider",style:{marginTop:"0em",padding:"0"}}),n.a.createElement(u.a,{size:"full"},n.a.createElement(f.j,{className:"coupon-subheader",tabIndex:0},Object(g.c)("COUPONS_SECTION_COUPONS"),n.a.createElement(C.a,{iconName:"mylidl",className:"icon-mylidl"})),n.a.createElement("div",{className:E?"coupon-login":""},!E&&n.a.createElement("div",{className:"lock-container"},n.a.createElement(X.a,{src:"/assets/images/lock-img.png",className:"coupon-actions",title:"back-button"}),n.a.createElement("span",{className:"coupon-lock-text"},n.a.createElement("span",null,Object(g.c)("COUPONS_LOCK_MESSAGE_1")),n.a.createElement("a",{href:"/login",className:"link"},Object(g.c)("COUPONS_LOCK_MESSAGE_2")),n.a.createElement("span",null,Object(g.c)("COUPONS_LOCK_MESSAGE_3"))))),n.a.createElement(d.a,{maxColumns:5,className:E?"coupons-grid":"coupons-grid lock-icon",gutterSize:"small",minItemWidth:c.d.fourup.MINWIDTH},this.props.coupons.map(function(e){return n.a.createElement(l.a,{key:e.id,coupon:e,isAuthenticated:E,className:E?"":"lock-icon",couponsRewardsPath:_})})),E&&n.a.createElement(J,null)))}}]),a}();re(ne,"displayName","CouponsList");var oe=Object(L.a)(function(e){var t=Object(o.d)(e);return"loaded"!==t.type?t:{user:e.user.user,type:"loaded",coupons:Object(o.e)(e),rewards:Object(o.g)(e),isAuthenticated:!!e.auth.token}},{onPageLoad:s.D})(ne)}}]);
//# sourceMappingURL=bundle.bbb497d06ea0f820f702.js.map